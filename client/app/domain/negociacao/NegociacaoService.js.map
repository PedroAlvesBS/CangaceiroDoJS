{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","ApplicationException","NegociacaoService","constructor","_http","obtemNegociacaoDaSemana","get","then","dados","map","objeto","Date","data","quantidade","valor","err","obtemNegociacaoDaSemanaAnterior","obtemNegociacaoDaSemanaRetrasada","obtemNegociacoesDoPeriodo","periodo","Promise","all","reduce","novoArray","item","concat","sort","a","b","getTime","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;AACAC,gC,+BAAAA,oB;;;AAEF,kBAAMC,iBAAN,CAAwB;AAC3BC,8BAAa;AACT,yBAAKC,KAAL,GAAa,IAAIL,WAAJ,EAAb;AACH;AACDM,0CAA0B;AACtB,2BAAO,KAAKD,KAAL,CACFE,GADE,CACE,oBADF,EAEFC,IAFE,CAGCC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJL,EAOCC,OAAQ;AACJ,8BAAM,IAAId,oBAAJ,CAAyB,wCAAzB,CAAN;AACH,qBATF,CAAP;AAWH;AACDe,kDAAkC;AAC9B,2BAAO,KAAKZ,KAAL,CACFE,GADE,CACE,sBADF,EAEFC,IAFE,CAGCC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJL,EAOCC,OAAQ;AACJ,8BAAM,IAAId,oBAAJ,CAAyB,0DAAzB,CAAN;AACH,qBATF,CAAP;AAWH;AACDgB,mDAAmC;AAC/B,2BAAO,KAAKb,KAAL,CACFE,GADE,CACE,uBADF,EAEFC,IAFE,CAGCC,SACIA,MAAMC,GAAN,CAAUC,UACN,IAAIV,UAAJ,CAAe,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CADJ,CAJL,EAOSC,OAAQ;AACJ,8BAAM,IAAId,oBAAJ,CAAyB,2DAAzB,CAAN;AACH,qBATV,CAAP;AAWH;;AAEKiB,yCAAN,GAAiC;AAAA;;AAAA;AAC7B,4BAAI;AACA,kCAAMC,UAAU,MAAMC,QAAQC,GAAR,CAAY,CAC9B,MAAKhB,uBAAL,EAD8B,EAE9B,MAAKW,+BAAL,EAF8B,EAG9B,MAAKC,gCAAL,EAH8B,CAAZ,CAAtB;AAKA,mCAAOE,QACFG,MADE,CACK,UAACC,SAAD,EAAYC,IAAZ;AAAA,uCAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CAArB;AAAA,6BADL,EACkD,EADlD,EAEFE,IAFE,CAEG,UAACC,CAAD,EAAIC,CAAJ;AAAA,uCAAUA,EAAEhB,IAAF,CAAOiB,OAAP,KAAmBF,EAAEf,IAAF,CAAOiB,OAAP,EAA7B;AAAA,6BAFH,CAAP;AAGH,yBATD,CASE,OAAOd,GAAP,EAAY;AACVe,oCAAQC,GAAR,CAAYhB,GAAZ;AACA,kCAAM,IAAId,oBAAJ,CAAyB,kDAAzB,CAAN;AACH;AAb4B;AAchC;AA1D0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\nimport { ApplicationException } from '../../util/ApplicationException.js';\n\nexport class NegociacaoService {\n    constructor(){\n        this._http = new HttpService();\n    }\n    obtemNegociacaoDaSemana() {\n        return this._http\n            .get('negociacoes/semana')\n            .then(\n                dados => \n                    dados.map(objeto =>\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n                ,\n                err =>  {\n                    throw new ApplicationException('Não foi possivel obter as negociacoes.');\n                }\n            );  \n    }\n    obtemNegociacaoDaSemanaAnterior() {\n        return this._http\n            .get('negociacoes/anterior')\n            .then(\n                dados =>\n                    dados.map(objeto =>\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n                ,\n                err =>  {\n                    throw new ApplicationException('Não foi possivel obter as negociacoes da semana anterior');\n                }\n            );  \n    }\n    obtemNegociacaoDaSemanaRetrasada() {\n        return this._http\n            .get('negociacoes/retrasada')\n            .then(\n                dados => \n                    dados.map(objeto =>\n                        new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n                        ,\n                        err =>  {\n                            throw new ApplicationException('Não foi possivel obter as negociacoes da semana retrasada');\n                        }\n            );  \n    }\n\n    async obtemNegociacoesDoPeriodo(){\n        try {\n            const periodo = await Promise.all([\n                this.obtemNegociacaoDaSemana(),\n                this.obtemNegociacaoDaSemanaAnterior(),\n                this.obtemNegociacaoDaSemanaRetrasada()\n            ]);\n            return periodo\n                .reduce((novoArray, item) => novoArray.concat(item), [])\n                .sort((a, b) => b.data.getTime() - a.data.getTime());\n        } catch (err) {\n            console.log(err);\n            throw new ApplicationException('Nao foi possivel obter as negociacoes do periodo');\n        }\n    }\n}"]}